streamlit
yfinance
pandas
plotly
import streamlit as st
import plotly.graph_objects as go
import pandas as pd
from datetime import datetime

st.set_page_config(page_title="ì‹œê°€ì´ì•¡ Top 10 - 3ë…„ ë³€í™”", layout="wide")

st.title("ğŸŒ ì „ ì„¸ê³„ ì‹œê°€ì´ì•¡ Top 10 ê¸°ì—…ì˜ 3ë…„ê°„ ë³€í™”")
st.write("Plotlyë¥¼ ì´ìš©í•œ ì¸í„°ë™í‹°ë¸Œ ì‹œê°í™”ì…ë‹ˆë‹¤.")

# ì˜ˆì‹œ ë°ì´í„° (ì‹¤ì œ ë°ì´í„° ì•„ë‹˜. ì›í•œë‹¤ë©´ API ë˜ëŠ” ìˆ˜ë™ ì…ë ¥ í•„ìš”)
# ì‹¤ì‚¬ìš© ì‹œ, Yahoo Finance API ë“±ì—ì„œ ì‹¤ì‹œê°„ ì‹œê°€ì´ì•¡ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ì„¸ìš”.
dates = pd.date_range(start="2022-01-01", periods=12, freq="Q")

companies = ["Apple", "Microsoft", "Saudi Aramco", "Alphabet", "Amazon", 
             "Nvidia", "Berkshire Hathaway", "Meta", "Tesla", "TSMC"]

# ìƒ˜í”Œ ì‹œê°€ì´ì•¡ ë°ì´í„° ìƒì„±
import numpy as np
np.random.seed(42)
data = {company: np.cumsum(np.random.randn(len(dates)) * 100 + 1500) * 1e9 for company in companies}
df = pd.DataFrame(data, index=dates)
df = df.reset_index().rename(columns={"index": "Date"})

# ì‚¬ìš©ì ê·¸ë˜í”„ íƒ€ì… ì„ íƒ
chart_type = st.radio("ê·¸ë˜í”„ ìœ í˜• ì„ íƒ", ["ì„ í˜• ê·¸ë˜í”„", "ì˜ì—­ ê·¸ë˜í”„"])

# Plotly ê·¸ë˜í”„ ìƒì„±
fig = go.Figure()

for company in companies:
    if chart_type == "ì„ í˜• ê·¸ë˜í”„":
        fig.add_trace(go.Scatter(
            x=df["Date"],
            y=df[company],
            mode="lines",
            name=company
        ))
    else:
        fig.add_trace(go.Scatter(
            x=df["Date"],
            y=df[company],
            mode="lines",
            name=company,
            stackgroup="one"
        ))

fig.update_layout(
    title="ì‹œê°€ì´ì•¡ ë³€í™” ì¶”ì´ (ë‹¨ìœ„: ë‹¬ëŸ¬)",
    xaxis_title="ë‚ ì§œ",
    yaxis_title="ì‹œê°€ì´ì•¡ ($)",
    hovermode="x unified",
    template="plotly_white",
    height=600
)

st.plotly_chart(fig, use_container_width=True)
